@page "/journal"
<style>
    /* ===== Page Wrapper ===== */
    .journal-wrapper {
        max-width: 900px;
        margin: 30px auto;
        padding: 25px;
        border-radius: 20px;
        background: linear-gradient(135deg, #eef2ff, #f8fafc);
    }

    /* ===== Headings ===== */
    h3 {
        text-align: center;
        font-weight: 700;
        margin-bottom: 25px;
    }

    /* ===== Labels ===== */
    label {
        margin-top: 18px;
        display: block;
        font-size: 14px;
        font-weight: 600;
        letter-spacing: 0.5px;
        text-transform: uppercase;
        opacity: 0.7;
    }

    /* ===== Inputs ===== */
    input, textarea, select {
        width: 100%;
        padding: 14px;
        margin-top: 6px;
        border-radius: 14px;
        border: none;
        background: white;
        box-shadow: inset 0 0 0 1px #e5e7eb;
        font-size: 15px;
    }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            box-shadow: 0 0 0 2px #6366f1;
        }

    /* ===== Toolbar ===== */
    .editor-toolbar {
        display: flex;
        gap: 10px;
        margin-top: 16px;
    }

        .editor-toolbar button {
            flex: 1;
            padding: 10px;
            border-radius: 999px;
            border: none;
            background: #e0e7ff;
            color: #3730a3;
            font-weight: 600;
            cursor: pointer;
        }

            .editor-toolbar button:hover {
                background: #6366f1;
                color: white;
            }

    /* ===== Textarea ===== */
    textarea {
        min-height: 220px;
        resize: none;
        margin-top: 12px;
    }

    /* ===== Save Button ===== */
    button {
        width: 100%;
        margin-top: 22px;
        padding: 14px;
        border-radius: 16px;
        border: none;
        background: linear-gradient(135deg, #6366f1, #4f46e5);
        color: white;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
    }

        button:hover {
            opacity: 0.9;
        }

    /* ===== Preview ===== */
    .markdown-preview {
        margin-top: 18px;
        padding: 18px;
        border-radius: 16px;
        background: white;
        box-shadow: 0 10px 20px rgba(0,0,0,0.05);
    }

    /* ===== Meta ===== */
    p {
        font-size: 13px;
        opacity: 0.7;
    }

    /* ===== Dark Mode ===== */
    .dark .journal-wrapper {
        background: linear-gradient(135deg, #0f172a, #1e293b);
    }

    .dark input,
    .dark textarea,
    .dark select,
    .dark .markdown-preview {
        background: #1e293b;
        color: #f8fafc;
        box-shadow: inset 0 0 0 1px #475569;
    }

    .dark .editor-toolbar button {
        background: #334155;
        color: #f8fafc;
    }
</style>


<h3>Today's Journal Entry</h3>
<link href="Journal.razor.css" rel="stylesheet" />
<link href="~/css/bootstrap/bootstrap.min.css" rel="stylesheet" />

@code {
    string title = "";
    string markdownContent = "";
    string mood = "Happy";

    DateTime createdAt = DateTime.Now;
    DateTime updatedAt = DateTime.Now;

    void SaveEntry()
    {
        updatedAt = DateTime.Now;
    }

    // Toolbar actions
    void AddBold() => markdownContent += "** **";
    void AddItalic() => markdownContent += "* *";
    void AddHeading() => markdownContent += "\n# ";
    void AddList() => markdownContent += "\n- ";

    MarkupString RenderMarkdown()
    {
        var html = markdownContent;

        html = System.Text.RegularExpressions.Regex
            .Replace(html, @"\*\*(.*?)\*\*", "<b>$1</b>");

        html = System.Text.RegularExpressions.Regex
            .Replace(html, @"\*(.*?)\*", "<i>$1</i>");

        html = html.Replace("# ", "<h3>") + "</h3>";
        html = html.Replace("- ", "• ");
        html = html.Replace("\n", "<br />");

        return new MarkupString(html);
    }
}

<label>Title</label>
<input @bind="title" />

<label>Journal Content</label>

<!-- TOOLBAR -->
<div class="editor-toolbar">
    <button type="button" @onclick="AddBold"><b>B</b></button>
    <button type="button" @onclick="AddItalic"><i>I</i></button>
    <button type="button" @onclick="AddHeading">H</button>
    <button type="button" @onclick="AddList">• List</button>
</div>

<textarea rows="6"
          @bind="markdownContent"
          placeholder="Write your journal here...">
</textarea>

<label>Primary Mood</label>
<select @bind="mood">
    <option>Happy (Positive)</option>
    <option>Calm (Neutral)</option>
    <option>Stressed (Negative)</option>
</select>

<button @onclick="SaveEntry">Save Journal</button>

<hr />

<h4>Live Preview</h4>
<div class="markdown-preview">
    @RenderMarkdown()
</div>

<hr />

<p><b>Created:</b> @createdAt</p>
<p><b>Last Updated:</b> @updatedAt</p>